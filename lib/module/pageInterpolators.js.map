{"version":3,"names":["Platform","Extrapolate","interpolate","pageInterpolatorSlide","focusAnim","pageWidth","pageHeight","vertical","translateX","value","translateY","transform","pageInterpolatorCube","size","ratio","OS","perspective","angle","Math","atan","inputVal","inputRange","translate","CLAMP","rotate","translate1","extra","cos","translate2","rotateX","rotateY","opacity","pageInterpolatorStack","pageBuffer","scale","pageInterpolatorTurnIn","defaultPageInterpolator"],"sources":["pageInterpolators.ts"],"sourcesContent":["import { Platform } from \"react-native\";\nimport {\n  Extrapolate,\n  interpolate,\n  useAnimatedStyle,\n} from \"react-native-reanimated\";\nimport { PageInterpolatorParams } from \".\";\n\nexport function pageInterpolatorSlide({\n  focusAnim,\n  pageWidth,\n  pageHeight,\n  vertical,\n}: PageInterpolatorParams): ReturnType<typeof useAnimatedStyle> {\n  \"worklet\";\n\n  const translateX = vertical\n    ? 0\n    : interpolate(\n        focusAnim.value,\n        [-1, 0, 1],\n        [-pageWidth.value, 0, pageWidth.value]\n      );\n  const translateY = vertical\n    ? interpolate(\n        focusAnim.value,\n        [-1, 0, 1],\n        [-pageHeight.value, 0, pageHeight.value]\n      )\n    : 0;\n\n  return {\n    transform: [{ translateX }, { translateY }],\n  };\n}\n\nexport function pageInterpolatorCube({\n  focusAnim,\n  pageWidth,\n  pageHeight,\n  vertical,\n}: PageInterpolatorParams) {\n  \"worklet\";\n\n  const size = vertical ? pageHeight.value : pageWidth.value;\n\n  // FIXME: how to calculate this programatically?\n  const ratio = Platform.OS === \"android\" ? 1.23 : 2;\n  const perspective = size;\n\n  const angle = Math.atan(perspective / (size / 2));\n\n  const inputVal = interpolate(focusAnim.value, [-1, 1], [1, -1]);\n  const inputRange = [-1, 1];\n\n  const translate = interpolate(\n    inputVal,\n    inputRange,\n    [size / ratio, -size / ratio],\n    Extrapolate.CLAMP\n  );\n\n  const rotate = interpolate(\n    inputVal,\n    inputRange,\n    [angle, -angle],\n    Extrapolate.CLAMP\n  );\n\n  const translate1 = interpolate(\n    inputVal,\n    inputRange,\n    [size / 2, -size / 2],\n    Extrapolate.CLAMP\n  );\n\n  const extra = size / ratio / Math.cos(angle / 2) - size / ratio;\n  const translate2 = interpolate(\n    inputVal,\n    inputRange,\n    [-extra, extra],\n    Extrapolate.CLAMP\n  );\n\n  return {\n    transform: vertical\n      ? [\n          { perspective },\n          { translateY: translate },\n          { rotateX: `${-rotate}rad` },\n          { translateY: translate1 },\n          { translateY: translate2 },\n        ]\n      : [\n          { perspective },\n          { translateX: translate },\n          { rotateY: `${rotate}rad` },\n          { translateX: translate1 },\n          { translateX: translate2 },\n        ],\n    opacity: interpolate(inputVal, [-2, -1, 0, 1, 2], [0, 0.9, 1, 0.9, 0]),\n  };\n}\n\nexport function pageInterpolatorStack({\n  focusAnim,\n  pageWidth,\n  pageHeight,\n  pageBuffer,\n  vertical,\n}: PageInterpolatorParams) {\n  \"worklet\";\n\n  const translateX = interpolate(\n    focusAnim.value,\n    [-1, 0, 1],\n    vertical ? [10, 0, -10] : [-pageWidth.value * 1.3, 0, -10]\n  );\n\n  const translateY = interpolate(\n    focusAnim.value,\n    [-0.5, 0, 1],\n    vertical ? [-pageHeight.value * 1.3, 0, -10] : [10, 0, -10]\n  );\n\n  const opacity = interpolate(\n    focusAnim.value,\n    [-pageBuffer, -pageBuffer + 1, 0, pageBuffer - 1, pageBuffer],\n    [0, 1, 1, 1, 1]\n  );\n\n  const scale = interpolate(\n    focusAnim.value,\n    [-pageBuffer, -pageBuffer + 1, 0, pageBuffer - 1, pageBuffer],\n    [0.1, 0.9, 0.9, 0.9, 0.1]\n  );\n\n  return {\n    transform: [{ translateX }, { translateY }, { scale }],\n    opacity,\n  };\n}\n\nexport function pageInterpolatorTurnIn({\n  focusAnim,\n  pageWidth,\n  pageHeight,\n  vertical,\n}: PageInterpolatorParams) {\n  \"worklet\";\n\n  const translateX = interpolate(\n    focusAnim.value,\n    [-1, 0, 1],\n    vertical ? [0, 0, 0] : [-pageWidth.value * 0.4, 0, pageWidth.value * 0.4]\n  );\n\n  const translateY = interpolate(\n    focusAnim.value,\n    [-1, 0, 1],\n    vertical ? [-pageHeight.value * 0.5, 0, pageHeight.value * 0.5] : [0, 0, 0]\n  );\n\n  const scale = interpolate(focusAnim.value, [-1, 0, 1], [0.4, 0.5, 0.4]);\n\n  const rotateY = interpolate(\n    focusAnim.value,\n    [-1, 1],\n    vertical ? [0, 0] : [75, -75],\n    Extrapolate.CLAMP\n  );\n  const rotateX = interpolate(\n    focusAnim.value,\n    [-1, 1],\n    vertical ? [-75, 75] : [0, 0],\n    Extrapolate.CLAMP\n  );\n\n  return {\n    transform: [\n      { perspective: 1000 },\n      { translateX },\n      { translateY },\n      { rotateY: `${rotateY}deg` },\n      { rotateX: `${rotateX}deg` },\n      { scale },\n    ],\n  };\n}\n\nexport const defaultPageInterpolator = pageInterpolatorSlide;\n"],"mappings":"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","ignoreList":[]}