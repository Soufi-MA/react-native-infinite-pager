{"version":3,"names":["_reactNative","require","_reactNativeReanimated","pageInterpolatorSlide","focusAnim","pageWidth","pageHeight","vertical","translateX","interpolate","value","translateY","transform","pageInterpolatorCube","size","ratio","Platform","OS","perspective","angle","Math","atan","inputVal","inputRange","translate","Extrapolate","CLAMP","rotate","translate1","extra","cos","translate2","rotateX","rotateY","opacity","pageInterpolatorStack","pageBuffer","scale","pageInterpolatorTurnIn","defaultPageInterpolator","exports"],"sources":["pageInterpolators.ts"],"sourcesContent":["import { Platform } from \"react-native\";\nimport {\n  Extrapolate,\n  interpolate,\n  useAnimatedStyle,\n} from \"react-native-reanimated\";\nimport { PageInterpolatorParams } from \".\";\n\nexport function pageInterpolatorSlide({\n  focusAnim,\n  pageWidth,\n  pageHeight,\n  vertical,\n}: PageInterpolatorParams): ReturnType<typeof useAnimatedStyle> {\n  \"worklet\";\n\n  const translateX = vertical\n    ? 0\n    : interpolate(\n        focusAnim.value,\n        [-1, 0, 1],\n        [-pageWidth.value, 0, pageWidth.value]\n      );\n  const translateY = vertical\n    ? interpolate(\n        focusAnim.value,\n        [-1, 0, 1],\n        [-pageHeight.value, 0, pageHeight.value]\n      )\n    : 0;\n\n  return {\n    transform: [{ translateX }, { translateY }],\n  };\n}\n\nexport function pageInterpolatorCube({\n  focusAnim,\n  pageWidth,\n  pageHeight,\n  vertical,\n}: PageInterpolatorParams) {\n  \"worklet\";\n\n  const size = vertical ? pageHeight.value : pageWidth.value;\n\n  // FIXME: how to calculate this programatically?\n  const ratio = Platform.OS === \"android\" ? 1.23 : 2;\n  const perspective = size;\n\n  const angle = Math.atan(perspective / (size / 2));\n\n  const inputVal = interpolate(focusAnim.value, [-1, 1], [1, -1]);\n  const inputRange = [-1, 1];\n\n  const translate = interpolate(\n    inputVal,\n    inputRange,\n    [size / ratio, -size / ratio],\n    Extrapolate.CLAMP\n  );\n\n  const rotate = interpolate(\n    inputVal,\n    inputRange,\n    [angle, -angle],\n    Extrapolate.CLAMP\n  );\n\n  const translate1 = interpolate(\n    inputVal,\n    inputRange,\n    [size / 2, -size / 2],\n    Extrapolate.CLAMP\n  );\n\n  const extra = size / ratio / Math.cos(angle / 2) - size / ratio;\n  const translate2 = interpolate(\n    inputVal,\n    inputRange,\n    [-extra, extra],\n    Extrapolate.CLAMP\n  );\n\n  return {\n    transform: vertical\n      ? [\n          { perspective },\n          { translateY: translate },\n          { rotateX: `${-rotate}rad` },\n          { translateY: translate1 },\n          { translateY: translate2 },\n        ]\n      : [\n          { perspective },\n          { translateX: translate },\n          { rotateY: `${rotate}rad` },\n          { translateX: translate1 },\n          { translateX: translate2 },\n        ],\n    opacity: interpolate(inputVal, [-2, -1, 0, 1, 2], [0, 0.9, 1, 0.9, 0]),\n  };\n}\n\nexport function pageInterpolatorStack({\n  focusAnim,\n  pageWidth,\n  pageHeight,\n  pageBuffer,\n  vertical,\n}: PageInterpolatorParams) {\n  \"worklet\";\n\n  const translateX = interpolate(\n    focusAnim.value,\n    [-1, 0, 1],\n    vertical ? [10, 0, -10] : [-pageWidth.value * 1.3, 0, -10]\n  );\n\n  const translateY = interpolate(\n    focusAnim.value,\n    [-0.5, 0, 1],\n    vertical ? [-pageHeight.value * 1.3, 0, -10] : [10, 0, -10]\n  );\n\n  const opacity = interpolate(\n    focusAnim.value,\n    [-pageBuffer, -pageBuffer + 1, 0, pageBuffer - 1, pageBuffer],\n    [0, 1, 1, 1, 1]\n  );\n\n  const scale = interpolate(\n    focusAnim.value,\n    [-pageBuffer, -pageBuffer + 1, 0, pageBuffer - 1, pageBuffer],\n    [0.1, 0.9, 0.9, 0.9, 0.1]\n  );\n\n  return {\n    transform: [{ translateX }, { translateY }, { scale }],\n    opacity,\n  };\n}\n\nexport function pageInterpolatorTurnIn({\n  focusAnim,\n  pageWidth,\n  pageHeight,\n  vertical,\n}: PageInterpolatorParams) {\n  \"worklet\";\n\n  const translateX = interpolate(\n    focusAnim.value,\n    [-1, 0, 1],\n    vertical ? [0, 0, 0] : [-pageWidth.value * 0.4, 0, pageWidth.value * 0.4]\n  );\n\n  const translateY = interpolate(\n    focusAnim.value,\n    [-1, 0, 1],\n    vertical ? [-pageHeight.value * 0.5, 0, pageHeight.value * 0.5] : [0, 0, 0]\n  );\n\n  const scale = interpolate(focusAnim.value, [-1, 0, 1], [0.4, 0.5, 0.4]);\n\n  const rotateY = interpolate(\n    focusAnim.value,\n    [-1, 1],\n    vertical ? [0, 0] : [75, -75],\n    Extrapolate.CLAMP\n  );\n  const rotateX = interpolate(\n    focusAnim.value,\n    [-1, 1],\n    vertical ? [-75, 75] : [0, 0],\n    Extrapolate.CLAMP\n  );\n\n  return {\n    transform: [\n      { perspective: 1000 },\n      { translateX },\n      { translateY },\n      { rotateY: `${rotateY}deg` },\n      { rotateX: `${rotateX}deg` },\n      { scale },\n    ],\n  };\n}\n\nexport const defaultPageInterpolator = pageInterpolatorSlide;\n"],"mappings":"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","ignoreList":[]}