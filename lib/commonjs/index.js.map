{"version":3,"names":["_react","_interopRequireWildcard","require","_reactNative","_reactNativeReanimated","_reactNativeGestureHandler","_pageInterpolators","_useStableCallback","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","_extends","assign","bind","arguments","length","apply","preInitSize","makeMutable","Preset","exports","PageInterpolators","SLIDE","pageInterpolatorSlide","CUBE","pageInterpolatorCube","STACK","pageInterpolatorStack","TURN_IN","pageInterpolatorTurnIn","DEFAULT_ANIMATION_CONFIG","damping","mass","stiffness","overshootClamping","restSpeedThreshold","restDisplacementThreshold","EMPTY_SIMULTANEOUS_GESTURES","EMPTY_ANIMATION_CONFIG","InfinitePager","vertical","PageComponent","pageCallbackNode","onPageChange","pageBuffer","style","pageWrapperStyle","minIndex","Infinity","maxIndex","simultaneousGestures","gesturesDisabled","animationConfig","renderPage","flingVelocity","preset","pageInterpolator","bouncePct","debugTag","width","height","minDistance","initialIndex","syncNode","ref","orientation","pageWidth","useSharedValue","pageHeight","pageSize","onLayoutPromise","onLayoutResolve","useState","_r","_val","_p","Promise","resolve","_translate","translate","curIndex","setCurIndex","gestureRef","useRef","pageAnimInternal","pageAnim","activePagers","nestingDepth","pagers","useContext","InfinitePagerContext","parentGestures","SimultaneousGestureContext","pagerId","useMemo","Math","random","useEffect","updated","Set","value","add","values","delete","curIndexRef","current","animCfgVal","useDerivedValue","gesturesDisabledAnim","setPage","useStableCallback","index","options","layoutPageSize","pSize","updatedTranslate","animated","animCfg","withSpring","useImperativeHandle","getPage","incrementPage","decrementPage","pageIndices","Array","map","_","bufferIndex","onPageChangeInternal","pg","useAnimatedReaction","round","cur","prev","runOnJS","startTranslate","minIndexAnim","maxIndexAnim","isMinIndex","isMaxIndex","isAtEdge","isAtEdgeAnim","initTouchX","initTouchY","isGestureLocked","isDeepestInOrientation","filter","v","split","every","Number","panGesture","Gesture","Pan","onBegin","evt","slice","push","x","y","console","log","onTouchesMove","mgr","mainTouch","changedTouches","evtVal","initTouch","evtTranslate","swipingPastEnd","shouldFailSelf","failReason","failDetails","pId","fail","includes","onUpdate","translationY","translationX","crossAxisTranslate","isSwipingCrossAxis","abs","rawVal","page","referenceVal","pageOverflowPct","overflowTrans","maxBounceTrans","bounceTrans","clampedVal","onEnd","evtVelocity","velocityY","velocityX","isFling","velocityModifier","onFinalize","updatedPagerIds","id","enabled","withRef","externalGestures","all","toGestureType","reduce","acc","toGestureArray","simultaneousWithExternalGesture","allGestures","wrapperStyle","s","createElement","SimultaneousGestureProvider","GestureDetector","gesture","View","onLayout","nativeEvent","layout","pageIndex","PageWrapper","key","isActive","React","memo","translation","focusAnim","animStyle","useAnimatedStyle","isInitialPage","hasInitialized","isInactivePageBeforeInit","_pageWidth","_pageHeight","warn","Error","pointerEvents","styles","pageWrapper","activePage","pageWidthAnim","pageHeightAnim","_default","withWrappedProvider","forwardRef","Inner","props","InfinitePagerProvider","StyleSheet","create","left","right","top","bottom","position","createContext","children","Provider","rootPagers","rootActivePagers","isRoot"],"sources":["index.tsx"],"sourcesContent":["import React, {\n  useState,\n  useImperativeHandle,\n  useRef,\n  useContext,\n  useMemo,\n  useEffect,\n} from \"react\";\nimport { StyleProp, StyleSheet, ViewStyle } from \"react-native\";\nimport Animated, {\n  useAnimatedStyle,\n  useSharedValue,\n  withSpring,\n  useDerivedValue,\n  useAnimatedReaction,\n  runOnJS,\n  WithSpringConfig,\n  makeMutable,\n  SharedValue,\n  DerivedValue,\n} from \"react-native-reanimated\";\nimport {\n  ComposedGesture,\n  Gesture,\n  GestureDetector,\n  GestureType,\n} from \"react-native-gesture-handler\";\nimport {\n  defaultPageInterpolator,\n  pageInterpolatorCube,\n  pageInterpolatorSlide,\n  pageInterpolatorStack,\n  pageInterpolatorTurnIn,\n} from \"./pageInterpolators\";\nimport { useStableCallback } from \"./useStableCallback\";\n\n// dummy value to translate pages offscreen before layout is known\nconst preInitSize = makeMutable(99999);\n\nexport enum Preset {\n  SLIDE = \"slide\",\n  CUBE = \"cube\",\n  STACK = \"stack\",\n  TURN_IN = \"turn-in\",\n}\n\nconst PageInterpolators = {\n  [Preset.SLIDE]: pageInterpolatorSlide,\n  [Preset.CUBE]: pageInterpolatorCube,\n  [Preset.STACK]: pageInterpolatorStack,\n  [Preset.TURN_IN]: pageInterpolatorTurnIn,\n};\n\nexport const DEFAULT_ANIMATION_CONFIG: WithSpringConfig = {\n  damping: 20,\n  mass: 0.2,\n  stiffness: 100,\n  overshootClamping: false,\n  restSpeedThreshold: 0.2,\n  restDisplacementThreshold: 0.2,\n};\n\nexport type InfinitePagerPageProps = {\n  index: number;\n  focusAnim: DerivedValue<number>;\n  isActive: boolean;\n  pageWidthAnim: SharedValue<number>;\n  pageHeightAnim: SharedValue<number>;\n  pageAnim: SharedValue<number>;\n};\n\ntype SimultaneousGesture = ComposedGesture | GestureType;\n\nexport type InfinitePagerPageComponent = (\n  props: InfinitePagerPageProps\n) => JSX.Element | null;\n\ntype AnyStyle = StyleProp<ViewStyle> | ReturnType<typeof useAnimatedStyle>;\n\nexport type InfinitePagerProps = {\n  vertical?: boolean;\n  PageComponent?:\n    | InfinitePagerPageComponent\n    | React.MemoExoticComponent<InfinitePagerPageComponent>;\n  renderPage?: InfinitePagerPageComponent;\n  pageCallbackNode?: SharedValue<number>;\n  syncNode?: SharedValue<number>;\n  onPageChange?: (page: number) => void;\n  pageBuffer?: number; // number of pages to render on either side of active page\n  style?: AnyStyle;\n  pageWrapperStyle?: AnyStyle;\n  pageInterpolator?: typeof defaultPageInterpolator;\n  minIndex?: number;\n  maxIndex?: number;\n  simultaneousGestures?: SimultaneousGesture[];\n  gesturesDisabled?: boolean;\n  animationConfig?: Partial<WithSpringConfig>;\n  flingVelocity?: number;\n  preset?: Preset;\n  bouncePct?: number;\n  debugTag?: string;\n  width?: number;\n  height?: number;\n  minDistance?: number;\n  initialIndex?: number;\n};\n\ntype ImperativeApiOptions = {\n  animated?: boolean;\n};\n\nexport type InfinitePagerImperativeApi = {\n  getPage: () => number;\n  setPage: (index: number, options: ImperativeApiOptions) => void;\n  incrementPage: (options: ImperativeApiOptions) => void;\n  decrementPage: (options: ImperativeApiOptions) => void;\n  gestureRef: React.MutableRefObject<GestureType | undefined>;\n};\n\nconst EMPTY_SIMULTANEOUS_GESTURES: NonNullable<\n  InfinitePagerProps[\"simultaneousGestures\"]\n> = [];\nconst EMPTY_ANIMATION_CONFIG: NonNullable<\n  InfinitePagerProps[\"animationConfig\"]\n> = {};\n\nfunction InfinitePager(\n  {\n    vertical = false,\n    PageComponent,\n    pageCallbackNode,\n    onPageChange,\n    pageBuffer = 1,\n    style,\n    pageWrapperStyle,\n    minIndex = -Infinity,\n    maxIndex = Infinity,\n    simultaneousGestures = EMPTY_SIMULTANEOUS_GESTURES,\n    gesturesDisabled,\n    animationConfig = EMPTY_ANIMATION_CONFIG,\n    renderPage,\n    flingVelocity = 500,\n    preset = Preset.SLIDE,\n    pageInterpolator = PageInterpolators[preset],\n    bouncePct = 0.0,\n    debugTag = \"\",\n    width,\n    height,\n    minDistance,\n    initialIndex = 0,\n    syncNode,\n  }: InfinitePagerProps,\n  ref: React.ForwardedRef<InfinitePagerImperativeApi>\n) {\n  const orientation = vertical ? \"vertical\" : \"horizontal\";\n\n  const pageWidth = useSharedValue(width || 0);\n  const pageHeight = useSharedValue(height || 0);\n  const pageSize = vertical ? pageHeight : pageWidth;\n\n  const [{ onLayoutPromise, onLayoutResolve }] = useState(() => {\n    let _r = (_val: number) => {};\n    const _p = new Promise<number>((resolve) => {\n      _r = resolve;\n    });\n    return {\n      onLayoutPromise: _p,\n      onLayoutResolve: _r,\n    };\n  });\n\n  const _translate = useSharedValue(0);\n  const translate = syncNode || _translate;\n\n  const [curIndex, setCurIndex] = useState(initialIndex);\n  const gestureRef = useRef<GestureType>();\n\n  const pageAnimInternal = useSharedValue(initialIndex);\n  const pageAnim = pageCallbackNode || pageAnimInternal;\n\n  const { activePagers, nestingDepth, pagers } =\n    useContext(InfinitePagerContext);\n\n  const parentGestures = useContext(SimultaneousGestureContext);\n\n  const pagerId = useMemo(() => {\n    return `${orientation}:${nestingDepth}:${Math.random()}`;\n  }, [orientation, nestingDepth]);\n\n  useEffect(() => {\n    const updated = new Set(pagers.value);\n    updated.add(pagerId);\n    pagers.value = [...updated.values()];\n    return () => {\n      const updated = new Set(pagers.value);\n      updated.delete(pagerId);\n      pagers.value = [...updated.values()];\n    };\n  }, [pagerId, pagers]);\n\n  const curIndexRef = useRef(curIndex);\n  curIndexRef.current = curIndex;\n\n  const animCfgVal = useDerivedValue(() => animationConfig, [animationConfig]);\n\n  const gesturesDisabledAnim = useDerivedValue(() => {\n    return !!gesturesDisabled;\n  }, [gesturesDisabled]);\n\n  const setPage = useStableCallback(\n    async (index: number, options: ImperativeApiOptions = {}) => {\n      const layoutPageSize = await onLayoutPromise;\n      const pSize = pageSize.value || layoutPageSize;\n      const updatedTranslate = index * pSize * -1 + initialIndex * pSize;\n\n      if (index < minIndex || index > maxIndex) return;\n\n      if (options.animated) {\n        const animCfg = {\n          ...DEFAULT_ANIMATION_CONFIG,\n          ...animCfgVal.value,\n        } as WithSpringConfig;\n\n        translate.value = withSpring(updatedTranslate, animCfg);\n      } else {\n        translate.value = updatedTranslate;\n      }\n    }\n  );\n\n  useImperativeHandle(\n    ref,\n    () => ({\n      getPage: () => curIndexRef.current,\n      setPage,\n      incrementPage: (options?: ImperativeApiOptions) => {\n        setPage(curIndexRef.current + 1, options);\n      },\n      decrementPage: (options?: ImperativeApiOptions) => {\n        setPage(curIndexRef.current - 1, options);\n      },\n      gestureRef,\n    }),\n    [setPage]\n  );\n\n  const pageIndices = [...Array(pageBuffer * 2 + 1)].map((_, i) => {\n    const bufferIndex = i - pageBuffer;\n    return curIndex - bufferIndex;\n  });\n\n  useDerivedValue(() => {\n    if (pageSize.value) {\n      pageAnim.value = initialIndex + (translate.value / pageSize.value) * -1;\n    }\n  }, [pageSize, pageAnim, translate, initialIndex]);\n\n  const onPageChangeInternal = useStableCallback((pg: number) => {\n    onPageChange?.(pg);\n    setCurIndex(pg);\n  });\n\n  useAnimatedReaction(\n    () => {\n      return Math.round(pageAnim.value);\n    },\n    (cur, prev) => {\n      if (cur !== prev) {\n        runOnJS(onPageChangeInternal)(cur);\n      }\n    },\n    []\n  );\n\n  const startTranslate = useSharedValue(0);\n\n  const minIndexAnim = useDerivedValue(() => {\n    return minIndex;\n  }, [minIndex]);\n  const maxIndexAnim = useDerivedValue(() => {\n    return maxIndex;\n  }, [maxIndex]);\n\n  const isMinIndex = useDerivedValue(() => {\n    return curIndex <= minIndex;\n  }, [curIndex, minIndex]);\n  const isMaxIndex = useDerivedValue(() => {\n    return curIndex >= maxIndex;\n  }, [curIndex, maxIndex]);\n\n  const isAtEdge = isMinIndex || isMaxIndex;\n  const isAtEdgeAnim = useDerivedValue(() => {\n    return isAtEdge;\n  }, [isAtEdge]);\n\n  const initTouchX = useSharedValue(0);\n  const initTouchY = useSharedValue(0);\n\n  const isGestureLocked = useDerivedValue(() => {\n    // Gesture goes to the most-nested active child of both orientations\n    // All other pagers are locked\n    const isDeepestInOrientation = activePagers.value\n      .filter((v) => {\n        return v.split(\":\")[0] === orientation;\n      })\n      .every((v) => {\n        return Number(v.split(\":\")[1]) <= nestingDepth;\n      });\n    return activePagers.value.length && !isDeepestInOrientation;\n  }, [activePagers, orientation]);\n\n  const panGesture = useMemo(\n    () =>\n      Gesture.Pan()\n        .onBegin((evt) => {\n          \"worklet\";\n          if (!isAtEdgeAnim.value) {\n            const updated = activePagers.value.slice();\n            updated.push(pagerId);\n            activePagers.value = updated;\n          }\n          startTranslate.value = translate.value;\n          initTouchX.value = evt.x;\n          initTouchY.value = evt.y;\n          if (debugTag) {\n            console.log(`${debugTag} onBegin`, evt);\n          }\n        })\n        .onTouchesMove((evt, mgr) => {\n          \"worklet\";\n          const mainTouch = evt.changedTouches[0];\n\n          const evtVal = mainTouch[vertical ? \"y\" : \"x\"];\n          const initTouch = vertical ? initTouchY.value : initTouchX.value;\n          const evtTranslate = evtVal - initTouch;\n\n          const swipingPastEnd =\n            (isMinIndex.value && evtTranslate > 0) ||\n            (isMaxIndex.value && evtTranslate < 0);\n\n          const shouldFailSelf =\n            (!bouncePct && swipingPastEnd) ||\n            isGestureLocked.value ||\n            gesturesDisabledAnim.value;\n\n          if (shouldFailSelf) {\n            if (debugTag) {\n              const failReason = swipingPastEnd ? \"range\" : \"locked\";\n              const failDetails = swipingPastEnd\n                ? `${isMinIndex.value ? \"min\" : \"max\"}, ${evtTranslate}`\n                : \"\";\n              console.log(\n                `${debugTag}: ${failReason} fail (${failDetails})`,\n                evt\n              );\n              const updated = activePagers.value\n                .slice()\n                .filter((pId) => pId !== pagerId);\n              activePagers.value = updated;\n            }\n            mgr.fail();\n          } else {\n            if (!activePagers.value.includes(pagerId)) {\n              const updated = activePagers.value.slice();\n              updated.push(pagerId);\n              activePagers.value = updated;\n            }\n          }\n        })\n        .onUpdate((evt) => {\n          \"worklet\";\n          const evtTranslate = vertical ? evt.translationY : evt.translationX;\n          const crossAxisTranslate = vertical\n            ? evt.translationX\n            : evt.translationY;\n\n          const isSwipingCrossAxis =\n            Math.abs(crossAxisTranslate) > 10 &&\n            Math.abs(crossAxisTranslate) > Math.abs(evtTranslate);\n\n          if (isGestureLocked.value || isSwipingCrossAxis) return;\n\n          if (debugTag) {\n            console.log(\n              `${debugTag} onUpdate: ${\n                isGestureLocked.value ? \"(locked)\" : \"\"\n              }`,\n              evt\n            );\n          }\n\n          const rawVal = startTranslate.value + evtTranslate;\n          const page = initialIndex + -rawVal / pageSize.value;\n          if (page >= minIndexAnim.value && page <= maxIndexAnim.value) {\n            translate.value = rawVal;\n          } else {\n            const referenceVal =\n              page < minIndexAnim.value\n                ? minIndexAnim.value\n                : maxIndexAnim.value;\n            const pageOverflowPct = referenceVal - page;\n            const overflowTrans = pageOverflowPct * pageSize.value;\n            const maxBounceTrans = bouncePct * pageSize.value;\n            const bounceTrans = pageOverflowPct * maxBounceTrans;\n            const clampedVal = rawVal - overflowTrans;\n            translate.value = clampedVal + bounceTrans;\n          }\n        })\n        .onEnd((evt) => {\n          \"worklet\";\n          const evtVelocity = vertical ? evt.velocityY : evt.velocityX;\n          const evtTranslate = vertical ? evt.translationY : evt.translationX;\n          const crossAxisTranslate = vertical\n            ? evt.translationX\n            : evt.translationY;\n          const isSwipingCrossAxis =\n            Math.abs(crossAxisTranslate) > Math.abs(evtTranslate);\n\n          const isFling =\n            isGestureLocked.value || isSwipingCrossAxis\n              ? false\n              : Math.abs(evtVelocity) > flingVelocity;\n          let velocityModifier = isFling ? pageSize.value / 2 : 0;\n          if (evtVelocity < 0) velocityModifier *= -1;\n          let page =\n            initialIndex +\n            -1 *\n              Math.round((translate.value + velocityModifier) / pageSize.value);\n          if (page < minIndexAnim.value) page = minIndexAnim.value;\n          if (page > maxIndexAnim.value) page = maxIndexAnim.value;\n\n          const animCfg = Object.assign(\n            {},\n            DEFAULT_ANIMATION_CONFIG,\n            animCfgVal.value\n          );\n          translate.value = withSpring(\n            -(page - initialIndex) * pageSize.value,\n            animCfg\n          );\n          if (debugTag) {\n            console.log(\n              `${debugTag}: onEnd (${\n                isGestureLocked.value ? \"locked\" : \"unlocked\"\n              })`,\n              evt\n            );\n          }\n        })\n        .onFinalize((evt) => {\n          \"worklet\";\n          const updatedPagerIds = activePagers.value\n            .slice()\n            .filter((id) => id !== pagerId);\n          activePagers.value = updatedPagerIds;\n\n          if (debugTag) {\n            console.log(\n              `${debugTag}: onFinalize (${\n                isGestureLocked.value ? \"locked\" : \"unlocked\"\n              })`,\n              evt\n            );\n          }\n        }),\n    [\n      activePagers,\n      animCfgVal,\n      bouncePct,\n      debugTag,\n      flingVelocity,\n      gesturesDisabledAnim,\n      initTouchX,\n      initTouchY,\n      initialIndex,\n      isAtEdgeAnim,\n      isGestureLocked,\n      isMaxIndex,\n      isMinIndex,\n      maxIndexAnim,\n      minIndexAnim,\n      pageSize,\n      pagerId,\n      startTranslate,\n      translate,\n      vertical,\n    ]\n  );\n\n  panGesture.enabled(!gesturesDisabled).withRef(gestureRef);\n\n  if (typeof minDistance === \"number\") {\n    panGesture.minDistance(minDistance);\n  }\n\n  const externalGestures = useMemo(() => {\n    const all = [...parentGestures, ...simultaneousGestures];\n    const toGestureType = all.reduce((acc, cur) => {\n      acc.push(...cur.toGestureArray());\n      return acc;\n    }, [] as GestureType[]);\n\n    return toGestureType;\n  }, [parentGestures, simultaneousGestures]);\n\n  panGesture.simultaneousWithExternalGesture(...externalGestures);\n\n  const allGestures = useMemo(() => {\n    return [panGesture, ...externalGestures];\n  }, [panGesture, externalGestures]);\n\n  const wrapperStyle = useMemo(() => {\n    const s: StyleProp<ViewStyle> = {};\n    if (width) s.width = width;\n    if (height) s.height = height;\n    return s;\n  }, [width, height]);\n\n  return (\n    <SimultaneousGestureProvider simultaneousGestures={allGestures}>\n      <GestureDetector gesture={panGesture}>\n        <Animated.View\n          style={[wrapperStyle, style]}\n          onLayout={({ nativeEvent: { layout } }) => {\n            pageWidth.value = layout.width;\n            pageHeight.value = layout.height;\n            onLayoutResolve(vertical ? layout.height : layout.width);\n          }}\n        >\n          {pageIndices.map((pageIndex) => {\n            return (\n              <PageWrapper\n                key={`page-provider-wrapper-${pageIndex}`}\n                vertical={vertical}\n                pageAnim={pageAnim}\n                index={pageIndex}\n                pageWidth={pageWidth}\n                pageHeight={pageHeight}\n                isActive={pageIndex === curIndex}\n                PageComponent={PageComponent}\n                renderPage={renderPage}\n                style={pageWrapperStyle}\n                pageInterpolator={pageInterpolator}\n                pageBuffer={pageBuffer}\n                debugTag={debugTag}\n                initialIndex={initialIndex}\n              />\n            );\n          })}\n        </Animated.View>\n      </GestureDetector>\n    </SimultaneousGestureProvider>\n  );\n}\n\ntype PageWrapperProps = {\n  vertical: boolean;\n  pageAnim: SharedValue<number>;\n  index: number;\n  pageWidth: SharedValue<number>;\n  pageHeight: SharedValue<number>;\n  PageComponent?: InfinitePagerPageComponent;\n  renderPage?: InfinitePagerPageComponent;\n  isActive: boolean;\n  style?: AnyStyle;\n  pageInterpolator: typeof defaultPageInterpolator;\n  pageBuffer: number;\n  debugTag?: string;\n  initialIndex: number;\n};\n\nexport type PageInterpolatorParams = {\n  index: number;\n  vertical: boolean;\n  focusAnim: DerivedValue<number>;\n  pageAnim: DerivedValue<number>;\n  pageWidth: SharedValue<number>;\n  pageHeight: SharedValue<number>;\n  pageBuffer: number;\n};\n\nconst PageWrapper = React.memo(\n  ({\n    index,\n    pageAnim,\n    pageWidth,\n    pageHeight,\n    vertical,\n    PageComponent,\n    renderPage,\n    isActive,\n    style,\n    pageInterpolator,\n    pageBuffer,\n    initialIndex,\n  }: PageWrapperProps) => {\n    const pageSize = vertical ? pageHeight : pageWidth;\n\n    const translation = useDerivedValue(() => {\n      const translate = (index - pageAnim.value) * pageSize.value;\n      return translate;\n    }, []);\n\n    const focusAnim = useDerivedValue(() => {\n      if (!pageSize.value) {\n        return index - initialIndex;\n      }\n      return translation.value / pageSize.value;\n    }, [initialIndex]);\n\n    const animStyle = useAnimatedStyle(() => {\n      // Short circuit page interpolation to prevent buggy initial values due to possible race condition:\n      // https://github.com/software-mansion/react-native-reanimated/issues/2571\n      const isInitialPage = index === initialIndex;\n      const hasInitialized = !!pageSize.value;\n      const isInactivePageBeforeInit = !isInitialPage && !hasInitialized;\n      const _pageWidth = isInactivePageBeforeInit ? preInitSize : pageWidth;\n      const _pageHeight = isInactivePageBeforeInit ? preInitSize : pageHeight;\n      return pageInterpolator({\n        focusAnim,\n        pageAnim,\n        pageWidth: _pageWidth,\n        pageHeight: _pageHeight,\n        index,\n        vertical,\n        pageBuffer,\n      });\n    }, [\n      pageWidth,\n      pageHeight,\n      pageAnim,\n      index,\n      initialIndex,\n      translation,\n      vertical,\n      pageBuffer,\n    ]);\n\n    if (PageComponent && renderPage) {\n      console.warn(\n        \"PageComponent and renderPage both defined, defaulting to PageComponent\"\n      );\n    }\n\n    if (!PageComponent && !renderPage) {\n      throw new Error(\"Either PageComponent or renderPage must be defined.\");\n    }\n\n    return (\n      <Animated.View\n        pointerEvents={isActive ? \"auto\" : \"none\"}\n        style={[\n          style,\n          styles.pageWrapper,\n          animStyle,\n          isActive && styles.activePage,\n        ]}\n      >\n        {PageComponent ? (\n          <PageComponent\n            index={index}\n            isActive={isActive}\n            focusAnim={focusAnim}\n            pageWidthAnim={pageWidth}\n            pageHeightAnim={pageHeight}\n            pageAnim={pageAnim}\n          />\n        ) : (\n          renderPage?.({\n            index,\n            isActive,\n            focusAnim,\n            pageWidthAnim: pageWidth,\n            pageHeightAnim: pageHeight,\n            pageAnim,\n          })\n        )}\n      </Animated.View>\n    );\n  }\n);\n\nexport default React.memo(withWrappedProvider(React.forwardRef(InfinitePager)));\n\nfunction withWrappedProvider<P extends object, R extends object>(\n  Inner: React.ComponentType<P>\n) {\n  return React.forwardRef((props: P, ref: React.ForwardedRef<R>) => {\n    return (\n      <InfinitePagerProvider>\n        <Inner {...props} ref={ref} />\n      </InfinitePagerProvider>\n    );\n  });\n}\n\nconst styles = StyleSheet.create({\n  pageWrapper: {\n    left: 0,\n    right: 0,\n    top: 0,\n    bottom: 0,\n    position: \"absolute\",\n  },\n  activePage: {\n    position: \"relative\",\n  },\n});\n\nconst InfinitePagerContext = React.createContext({\n  activePagers: makeMutable([] as string[]) as SharedValue<string[]>,\n  pagers: makeMutable([] as string[]) as SharedValue<string[]>,\n  nestingDepth: -1,\n});\n\nconst SimultaneousGestureContext = React.createContext(\n  [] as SimultaneousGesture[]\n);\n\nfunction SimultaneousGestureProvider({\n  simultaneousGestures = EMPTY_SIMULTANEOUS_GESTURES,\n  children,\n}: {\n  simultaneousGestures?: SimultaneousGesture[];\n  children: React.ReactNode;\n}) {\n  return (\n    <SimultaneousGestureContext.Provider value={simultaneousGestures}>\n      {children}\n    </SimultaneousGestureContext.Provider>\n  );\n}\n\nfunction InfinitePagerProvider({ children }: { children: React.ReactNode }) {\n  const { nestingDepth, activePagers, pagers } =\n    useContext(InfinitePagerContext);\n  const rootPagers = useSharedValue<string[]>([]);\n  const rootActivePagers = useSharedValue<string[]>([]);\n\n  const value = useMemo(() => {\n    const isRoot = nestingDepth === -1;\n\n    return {\n      nestingDepth: nestingDepth + 1,\n      activePagers: isRoot ? rootActivePagers : activePagers,\n      pagers: isRoot ? rootPagers : pagers,\n    };\n  }, [nestingDepth, activePagers, pagers, rootPagers, rootActivePagers]);\n\n  return (\n    <InfinitePagerContext.Provider value={value}>\n      {children}\n    </InfinitePagerContext.Provider>\n  );\n}\n"],"mappings":"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","ignoreList":[]}