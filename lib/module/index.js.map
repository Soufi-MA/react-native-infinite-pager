{"version":3,"names":["React","useState","useImperativeHandle","useRef","useContext","useMemo","useEffect","StyleSheet","Animated","useAnimatedStyle","useSharedValue","withSpring","useDerivedValue","useAnimatedReaction","runOnJS","makeMutable","Gesture","GestureDetector","pageInterpolatorCube","pageInterpolatorSlide","pageInterpolatorStack","pageInterpolatorTurnIn","useStableCallback","preInitSize","Preset","PageInterpolators","SLIDE","CUBE","STACK","TURN_IN","DEFAULT_ANIMATION_CONFIG","damping","mass","stiffness","overshootClamping","restSpeedThreshold","restDisplacementThreshold","EMPTY_SIMULTANEOUS_GESTURES","EMPTY_ANIMATION_CONFIG","InfinitePager","vertical","PageComponent","pageCallbackNode","onPageChange","pageBuffer","style","pageWrapperStyle","minIndex","Infinity","maxIndex","simultaneousGestures","gesturesDisabled","animationConfig","renderPage","flingVelocity","preset","pageInterpolator","bouncePct","debugTag","width","height","minDistance","initialIndex","syncNode","ref","orientation","pageWidth","pageHeight","pageSize","onLayoutPromise","onLayoutResolve","_r","_val","_p","Promise","resolve","_translate","translate","curIndex","setCurIndex","gestureRef","pageAnimInternal","pageAnim","activePagers","nestingDepth","pagers","InfinitePagerContext","parentGestures","SimultaneousGestureContext","pagerId","Math","random","updated","Set","value","add","values","delete","curIndexRef","current","animCfgVal","gesturesDisabledAnim","setPage","index","options","layoutPageSize","pSize","updatedTranslate","animated","animCfg","getPage","incrementPage","decrementPage","pageIndices","Array","map","_","i","bufferIndex","onPageChangeInternal","pg","round","cur","prev","startTranslate","minIndexAnim","maxIndexAnim","isMinIndex","isMaxIndex","isAtEdge","isAtEdgeAnim","initTouchX","initTouchY","isGestureLocked","isDeepestInOrientation","filter","v","split","every","Number","length","panGesture","Pan","onBegin","evt","slice","push","x","y","console","log","onTouchesMove","mgr","mainTouch","changedTouches","evtVal","initTouch","evtTranslate","swipingPastEnd","shouldFailSelf","failReason","failDetails","pId","fail","includes","onUpdate","translationY","translationX","crossAxisTranslate","isSwipingCrossAxis","abs","rawVal","page","referenceVal","pageOverflowPct","overflowTrans","maxBounceTrans","bounceTrans","clampedVal","onEnd","evtVelocity","velocityY","velocityX","isFling","velocityModifier","Object","assign","onFinalize","updatedPagerIds","id","enabled","withRef","externalGestures","all","toGestureType","reduce","acc","toGestureArray","simultaneousWithExternalGesture","allGestures","wrapperStyle","s","createElement","SimultaneousGestureProvider","gesture","View","onLayout","nativeEvent","layout","pageIndex","PageWrapper","key","isActive","memo","translation","focusAnim","animStyle","isInitialPage","hasInitialized","isInactivePageBeforeInit","_pageWidth","_pageHeight","warn","Error","pointerEvents","styles","pageWrapper","activePage","pageWidthAnim","pageHeightAnim","withWrappedProvider","forwardRef","Inner","props","InfinitePagerProvider","_extends","create","left","right","top","bottom","position","createContext","children","Provider","rootPagers","rootActivePagers","isRoot"],"sources":["index.tsx"],"sourcesContent":["import React, {\n  useState,\n  useImperativeHandle,\n  useRef,\n  useContext,\n  useMemo,\n  useEffect,\n} from \"react\";\nimport { StyleProp, StyleSheet, ViewStyle } from \"react-native\";\nimport Animated, {\n  useAnimatedStyle,\n  useSharedValue,\n  withSpring,\n  useDerivedValue,\n  useAnimatedReaction,\n  runOnJS,\n  WithSpringConfig,\n  makeMutable,\n  SharedValue,\n  DerivedValue,\n} from \"react-native-reanimated\";\nimport {\n  ComposedGesture,\n  Gesture,\n  GestureDetector,\n  GestureType,\n} from \"react-native-gesture-handler\";\nimport {\n  defaultPageInterpolator,\n  pageInterpolatorCube,\n  pageInterpolatorSlide,\n  pageInterpolatorStack,\n  pageInterpolatorTurnIn,\n} from \"./pageInterpolators\";\nimport { useStableCallback } from \"./useStableCallback\";\n\n// dummy value to translate pages offscreen before layout is known\nconst preInitSize = makeMutable(99999);\n\nexport enum Preset {\n  SLIDE = \"slide\",\n  CUBE = \"cube\",\n  STACK = \"stack\",\n  TURN_IN = \"turn-in\",\n}\n\nconst PageInterpolators = {\n  [Preset.SLIDE]: pageInterpolatorSlide,\n  [Preset.CUBE]: pageInterpolatorCube,\n  [Preset.STACK]: pageInterpolatorStack,\n  [Preset.TURN_IN]: pageInterpolatorTurnIn,\n};\n\nexport const DEFAULT_ANIMATION_CONFIG: WithSpringConfig = {\n  damping: 20,\n  mass: 0.2,\n  stiffness: 100,\n  overshootClamping: false,\n  restSpeedThreshold: 0.2,\n  restDisplacementThreshold: 0.2,\n};\n\nexport type InfinitePagerPageProps = {\n  index: number;\n  focusAnim: DerivedValue<number>;\n  isActive: boolean;\n  pageWidthAnim: SharedValue<number>;\n  pageHeightAnim: SharedValue<number>;\n  pageAnim: SharedValue<number>;\n};\n\ntype SimultaneousGesture = ComposedGesture | GestureType;\n\nexport type InfinitePagerPageComponent = (\n  props: InfinitePagerPageProps\n) => JSX.Element | null;\n\ntype AnyStyle = StyleProp<ViewStyle> | ReturnType<typeof useAnimatedStyle>;\n\nexport type InfinitePagerProps = {\n  vertical?: boolean;\n  PageComponent?:\n    | InfinitePagerPageComponent\n    | React.MemoExoticComponent<InfinitePagerPageComponent>;\n  renderPage?: InfinitePagerPageComponent;\n  pageCallbackNode?: SharedValue<number>;\n  syncNode?: SharedValue<number>;\n  onPageChange?: (page: number) => void;\n  pageBuffer?: number; // number of pages to render on either side of active page\n  style?: AnyStyle;\n  pageWrapperStyle?: AnyStyle;\n  pageInterpolator?: typeof defaultPageInterpolator;\n  minIndex?: number;\n  maxIndex?: number;\n  simultaneousGestures?: SimultaneousGesture[];\n  gesturesDisabled?: boolean;\n  animationConfig?: Partial<WithSpringConfig>;\n  flingVelocity?: number;\n  preset?: Preset;\n  bouncePct?: number;\n  debugTag?: string;\n  width?: number;\n  height?: number;\n  minDistance?: number;\n  initialIndex?: number;\n};\n\ntype ImperativeApiOptions = {\n  animated?: boolean;\n};\n\nexport type InfinitePagerImperativeApi = {\n  getPage: () => number;\n  setPage: (index: number, options: ImperativeApiOptions) => void;\n  incrementPage: (options: ImperativeApiOptions) => void;\n  decrementPage: (options: ImperativeApiOptions) => void;\n  gestureRef: React.MutableRefObject<GestureType | undefined>;\n};\n\nconst EMPTY_SIMULTANEOUS_GESTURES: NonNullable<\n  InfinitePagerProps[\"simultaneousGestures\"]\n> = [];\nconst EMPTY_ANIMATION_CONFIG: NonNullable<\n  InfinitePagerProps[\"animationConfig\"]\n> = {};\n\nfunction InfinitePager(\n  {\n    vertical = false,\n    PageComponent,\n    pageCallbackNode,\n    onPageChange,\n    pageBuffer = 1,\n    style,\n    pageWrapperStyle,\n    minIndex = -Infinity,\n    maxIndex = Infinity,\n    simultaneousGestures = EMPTY_SIMULTANEOUS_GESTURES,\n    gesturesDisabled,\n    animationConfig = EMPTY_ANIMATION_CONFIG,\n    renderPage,\n    flingVelocity = 500,\n    preset = Preset.SLIDE,\n    pageInterpolator = PageInterpolators[preset],\n    bouncePct = 0.0,\n    debugTag = \"\",\n    width,\n    height,\n    minDistance,\n    initialIndex = 0,\n    syncNode,\n  }: InfinitePagerProps,\n  ref: React.ForwardedRef<InfinitePagerImperativeApi>\n) {\n  const orientation = vertical ? \"vertical\" : \"horizontal\";\n\n  const pageWidth = useSharedValue(width || 0);\n  const pageHeight = useSharedValue(height || 0);\n  const pageSize = vertical ? pageHeight : pageWidth;\n\n  const [{ onLayoutPromise, onLayoutResolve }] = useState(() => {\n    let _r = (_val: number) => {};\n    const _p = new Promise<number>((resolve) => {\n      _r = resolve;\n    });\n    return {\n      onLayoutPromise: _p,\n      onLayoutResolve: _r,\n    };\n  });\n\n  const _translate = useSharedValue(0);\n  const translate = syncNode || _translate;\n\n  const [curIndex, setCurIndex] = useState(initialIndex);\n  const gestureRef = useRef<GestureType>();\n\n  const pageAnimInternal = useSharedValue(initialIndex);\n  const pageAnim = pageCallbackNode || pageAnimInternal;\n\n  const { activePagers, nestingDepth, pagers } =\n    useContext(InfinitePagerContext);\n\n  const parentGestures = useContext(SimultaneousGestureContext);\n\n  const pagerId = useMemo(() => {\n    return `${orientation}:${nestingDepth}:${Math.random()}`;\n  }, [orientation, nestingDepth]);\n\n  useEffect(() => {\n    const updated = new Set(pagers.value);\n    updated.add(pagerId);\n    pagers.value = [...updated.values()];\n    return () => {\n      const updated = new Set(pagers.value);\n      updated.delete(pagerId);\n      pagers.value = [...updated.values()];\n    };\n  }, [pagerId, pagers]);\n\n  const curIndexRef = useRef(curIndex);\n  curIndexRef.current = curIndex;\n\n  const animCfgVal = useDerivedValue(() => animationConfig, [animationConfig]);\n\n  const gesturesDisabledAnim = useDerivedValue(() => {\n    return !!gesturesDisabled;\n  }, [gesturesDisabled]);\n\n  const setPage = useStableCallback(\n    async (index: number, options: ImperativeApiOptions = {}) => {\n      const layoutPageSize = await onLayoutPromise;\n      const pSize = pageSize.value || layoutPageSize;\n      const updatedTranslate = index * pSize * -1 + initialIndex * pSize;\n\n      if (index < minIndex || index > maxIndex) return;\n\n      if (options.animated) {\n        const animCfg = {\n          ...DEFAULT_ANIMATION_CONFIG,\n          ...animCfgVal.value,\n        } as WithSpringConfig;\n\n        translate.value = withSpring(updatedTranslate, animCfg);\n      } else {\n        translate.value = updatedTranslate;\n      }\n    }\n  );\n\n  useImperativeHandle(\n    ref,\n    () => ({\n      getPage: () => curIndexRef.current,\n      setPage,\n      incrementPage: (options?: ImperativeApiOptions) => {\n        setPage(curIndexRef.current + 1, options);\n      },\n      decrementPage: (options?: ImperativeApiOptions) => {\n        setPage(curIndexRef.current - 1, options);\n      },\n      gestureRef,\n    }),\n    [setPage]\n  );\n\n  const pageIndices = [...Array(pageBuffer * 2 + 1)].map((_, i) => {\n    const bufferIndex = i - pageBuffer;\n    return curIndex - bufferIndex;\n  });\n\n  useDerivedValue(() => {\n    if (pageSize.value) {\n      pageAnim.value = initialIndex + (translate.value / pageSize.value) * -1;\n    }\n  }, [pageSize, pageAnim, translate, initialIndex]);\n\n  const onPageChangeInternal = useStableCallback((pg: number) => {\n    onPageChange?.(pg);\n    setCurIndex(pg);\n  });\n\n  useAnimatedReaction(\n    () => {\n      return Math.round(pageAnim.value);\n    },\n    (cur, prev) => {\n      if (cur !== prev) {\n        runOnJS(onPageChangeInternal)(cur);\n      }\n    },\n    []\n  );\n\n  const startTranslate = useSharedValue(0);\n\n  const minIndexAnim = useDerivedValue(() => {\n    return minIndex;\n  }, [minIndex]);\n  const maxIndexAnim = useDerivedValue(() => {\n    return maxIndex;\n  }, [maxIndex]);\n\n  const isMinIndex = useDerivedValue(() => {\n    return curIndex <= minIndex;\n  }, [curIndex, minIndex]);\n  const isMaxIndex = useDerivedValue(() => {\n    return curIndex >= maxIndex;\n  }, [curIndex, maxIndex]);\n\n  const isAtEdge = isMinIndex || isMaxIndex;\n  const isAtEdgeAnim = useDerivedValue(() => {\n    return isAtEdge;\n  }, [isAtEdge]);\n\n  const initTouchX = useSharedValue(0);\n  const initTouchY = useSharedValue(0);\n\n  const isGestureLocked = useDerivedValue(() => {\n    // Gesture goes to the most-nested active child of both orientations\n    // All other pagers are locked\n    const isDeepestInOrientation = activePagers.value\n      .filter((v) => {\n        return v.split(\":\")[0] === orientation;\n      })\n      .every((v) => {\n        return Number(v.split(\":\")[1]) <= nestingDepth;\n      });\n    return activePagers.value.length && !isDeepestInOrientation;\n  }, [activePagers, orientation]);\n\n  const panGesture = useMemo(\n    () =>\n      Gesture.Pan()\n        .onBegin((evt) => {\n          \"worklet\";\n          if (!isAtEdgeAnim.value) {\n            const updated = activePagers.value.slice();\n            updated.push(pagerId);\n            activePagers.value = updated;\n          }\n          startTranslate.value = translate.value;\n          initTouchX.value = evt.x;\n          initTouchY.value = evt.y;\n          if (debugTag) {\n            console.log(`${debugTag} onBegin`, evt);\n          }\n        })\n        .onTouchesMove((evt, mgr) => {\n          \"worklet\";\n          const mainTouch = evt.changedTouches[0];\n\n          const evtVal = mainTouch[vertical ? \"y\" : \"x\"];\n          const initTouch = vertical ? initTouchY.value : initTouchX.value;\n          const evtTranslate = evtVal - initTouch;\n\n          const swipingPastEnd =\n            (isMinIndex.value && evtTranslate > 0) ||\n            (isMaxIndex.value && evtTranslate < 0);\n\n          const shouldFailSelf =\n            (!bouncePct && swipingPastEnd) ||\n            isGestureLocked.value ||\n            gesturesDisabledAnim.value;\n\n          if (shouldFailSelf) {\n            if (debugTag) {\n              const failReason = swipingPastEnd ? \"range\" : \"locked\";\n              const failDetails = swipingPastEnd\n                ? `${isMinIndex.value ? \"min\" : \"max\"}, ${evtTranslate}`\n                : \"\";\n              console.log(\n                `${debugTag}: ${failReason} fail (${failDetails})`,\n                evt\n              );\n              const updated = activePagers.value\n                .slice()\n                .filter((pId) => pId !== pagerId);\n              activePagers.value = updated;\n            }\n            mgr.fail();\n          } else {\n            if (!activePagers.value.includes(pagerId)) {\n              const updated = activePagers.value.slice();\n              updated.push(pagerId);\n              activePagers.value = updated;\n            }\n          }\n        })\n        .onUpdate((evt) => {\n          \"worklet\";\n          const evtTranslate = vertical ? evt.translationY : evt.translationX;\n          const crossAxisTranslate = vertical\n            ? evt.translationX\n            : evt.translationY;\n\n          const isSwipingCrossAxis =\n            Math.abs(crossAxisTranslate) > 10 &&\n            Math.abs(crossAxisTranslate) > Math.abs(evtTranslate);\n\n          if (isGestureLocked.value || isSwipingCrossAxis) return;\n\n          if (debugTag) {\n            console.log(\n              `${debugTag} onUpdate: ${\n                isGestureLocked.value ? \"(locked)\" : \"\"\n              }`,\n              evt\n            );\n          }\n\n          const rawVal = startTranslate.value + evtTranslate;\n          const page = initialIndex + -rawVal / pageSize.value;\n          if (page >= minIndexAnim.value && page <= maxIndexAnim.value) {\n            translate.value = rawVal;\n          } else {\n            const referenceVal =\n              page < minIndexAnim.value\n                ? minIndexAnim.value\n                : maxIndexAnim.value;\n            const pageOverflowPct = referenceVal - page;\n            const overflowTrans = pageOverflowPct * pageSize.value;\n            const maxBounceTrans = bouncePct * pageSize.value;\n            const bounceTrans = pageOverflowPct * maxBounceTrans;\n            const clampedVal = rawVal - overflowTrans;\n            translate.value = clampedVal + bounceTrans;\n          }\n        })\n        .onEnd((evt) => {\n          \"worklet\";\n          const evtVelocity = vertical ? evt.velocityY : evt.velocityX;\n          const evtTranslate = vertical ? evt.translationY : evt.translationX;\n          const crossAxisTranslate = vertical\n            ? evt.translationX\n            : evt.translationY;\n          const isSwipingCrossAxis =\n            Math.abs(crossAxisTranslate) > Math.abs(evtTranslate);\n\n          const isFling =\n            isGestureLocked.value || isSwipingCrossAxis\n              ? false\n              : Math.abs(evtVelocity) > flingVelocity;\n          let velocityModifier = isFling ? pageSize.value / 2 : 0;\n          if (evtVelocity < 0) velocityModifier *= -1;\n          let page =\n            initialIndex +\n            -1 *\n              Math.round((translate.value + velocityModifier) / pageSize.value);\n          if (page < minIndexAnim.value) page = minIndexAnim.value;\n          if (page > maxIndexAnim.value) page = maxIndexAnim.value;\n\n          const animCfg = Object.assign(\n            {},\n            DEFAULT_ANIMATION_CONFIG,\n            animCfgVal.value\n          );\n          translate.value = withSpring(\n            -(page - initialIndex) * pageSize.value,\n            animCfg\n          );\n          if (debugTag) {\n            console.log(\n              `${debugTag}: onEnd (${\n                isGestureLocked.value ? \"locked\" : \"unlocked\"\n              })`,\n              evt\n            );\n          }\n        })\n        .onFinalize((evt) => {\n          \"worklet\";\n          const updatedPagerIds = activePagers.value\n            .slice()\n            .filter((id) => id !== pagerId);\n          activePagers.value = updatedPagerIds;\n\n          if (debugTag) {\n            console.log(\n              `${debugTag}: onFinalize (${\n                isGestureLocked.value ? \"locked\" : \"unlocked\"\n              })`,\n              evt\n            );\n          }\n        }),\n    [\n      activePagers,\n      animCfgVal,\n      bouncePct,\n      debugTag,\n      flingVelocity,\n      gesturesDisabledAnim,\n      initTouchX,\n      initTouchY,\n      initialIndex,\n      isAtEdgeAnim,\n      isGestureLocked,\n      isMaxIndex,\n      isMinIndex,\n      maxIndexAnim,\n      minIndexAnim,\n      pageSize,\n      pagerId,\n      startTranslate,\n      translate,\n      vertical,\n    ]\n  );\n\n  panGesture.enabled(!gesturesDisabled).withRef(gestureRef);\n\n  if (typeof minDistance === \"number\") {\n    panGesture.minDistance(minDistance);\n  }\n\n  const externalGestures = useMemo(() => {\n    const all = [...parentGestures, ...simultaneousGestures];\n    const toGestureType = all.reduce((acc, cur) => {\n      acc.push(...cur.toGestureArray());\n      return acc;\n    }, [] as GestureType[]);\n\n    return toGestureType;\n  }, [parentGestures, simultaneousGestures]);\n\n  panGesture.simultaneousWithExternalGesture(...externalGestures);\n\n  const allGestures = useMemo(() => {\n    return [panGesture, ...externalGestures];\n  }, [panGesture, externalGestures]);\n\n  const wrapperStyle = useMemo(() => {\n    const s: StyleProp<ViewStyle> = {};\n    if (width) s.width = width;\n    if (height) s.height = height;\n    return s;\n  }, [width, height]);\n\n  return (\n    <SimultaneousGestureProvider simultaneousGestures={allGestures}>\n      <GestureDetector gesture={panGesture}>\n        <Animated.View\n          style={[wrapperStyle, style]}\n          onLayout={({ nativeEvent: { layout } }) => {\n            pageWidth.value = layout.width;\n            pageHeight.value = layout.height;\n            onLayoutResolve(vertical ? layout.height : layout.width);\n          }}\n        >\n          {pageIndices.map((pageIndex) => {\n            return (\n              <PageWrapper\n                key={`page-provider-wrapper-${pageIndex}`}\n                vertical={vertical}\n                pageAnim={pageAnim}\n                index={pageIndex}\n                pageWidth={pageWidth}\n                pageHeight={pageHeight}\n                isActive={pageIndex === curIndex}\n                PageComponent={PageComponent}\n                renderPage={renderPage}\n                style={pageWrapperStyle}\n                pageInterpolator={pageInterpolator}\n                pageBuffer={pageBuffer}\n                debugTag={debugTag}\n                initialIndex={initialIndex}\n              />\n            );\n          })}\n        </Animated.View>\n      </GestureDetector>\n    </SimultaneousGestureProvider>\n  );\n}\n\ntype PageWrapperProps = {\n  vertical: boolean;\n  pageAnim: SharedValue<number>;\n  index: number;\n  pageWidth: SharedValue<number>;\n  pageHeight: SharedValue<number>;\n  PageComponent?: InfinitePagerPageComponent;\n  renderPage?: InfinitePagerPageComponent;\n  isActive: boolean;\n  style?: AnyStyle;\n  pageInterpolator: typeof defaultPageInterpolator;\n  pageBuffer: number;\n  debugTag?: string;\n  initialIndex: number;\n};\n\nexport type PageInterpolatorParams = {\n  index: number;\n  vertical: boolean;\n  focusAnim: DerivedValue<number>;\n  pageAnim: DerivedValue<number>;\n  pageWidth: SharedValue<number>;\n  pageHeight: SharedValue<number>;\n  pageBuffer: number;\n};\n\nconst PageWrapper = React.memo(\n  ({\n    index,\n    pageAnim,\n    pageWidth,\n    pageHeight,\n    vertical,\n    PageComponent,\n    renderPage,\n    isActive,\n    style,\n    pageInterpolator,\n    pageBuffer,\n    initialIndex,\n  }: PageWrapperProps) => {\n    const pageSize = vertical ? pageHeight : pageWidth;\n\n    const translation = useDerivedValue(() => {\n      const translate = (index - pageAnim.value) * pageSize.value;\n      return translate;\n    }, []);\n\n    const focusAnim = useDerivedValue(() => {\n      if (!pageSize.value) {\n        return index - initialIndex;\n      }\n      return translation.value / pageSize.value;\n    }, [initialIndex]);\n\n    const animStyle = useAnimatedStyle(() => {\n      // Short circuit page interpolation to prevent buggy initial values due to possible race condition:\n      // https://github.com/software-mansion/react-native-reanimated/issues/2571\n      const isInitialPage = index === initialIndex;\n      const hasInitialized = !!pageSize.value;\n      const isInactivePageBeforeInit = !isInitialPage && !hasInitialized;\n      const _pageWidth = isInactivePageBeforeInit ? preInitSize : pageWidth;\n      const _pageHeight = isInactivePageBeforeInit ? preInitSize : pageHeight;\n      return pageInterpolator({\n        focusAnim,\n        pageAnim,\n        pageWidth: _pageWidth,\n        pageHeight: _pageHeight,\n        index,\n        vertical,\n        pageBuffer,\n      });\n    }, [\n      pageWidth,\n      pageHeight,\n      pageAnim,\n      index,\n      initialIndex,\n      translation,\n      vertical,\n      pageBuffer,\n    ]);\n\n    if (PageComponent && renderPage) {\n      console.warn(\n        \"PageComponent and renderPage both defined, defaulting to PageComponent\"\n      );\n    }\n\n    if (!PageComponent && !renderPage) {\n      throw new Error(\"Either PageComponent or renderPage must be defined.\");\n    }\n\n    return (\n      <Animated.View\n        pointerEvents={isActive ? \"auto\" : \"none\"}\n        style={[\n          style,\n          styles.pageWrapper,\n          animStyle,\n          isActive && styles.activePage,\n        ]}\n      >\n        {PageComponent ? (\n          <PageComponent\n            index={index}\n            isActive={isActive}\n            focusAnim={focusAnim}\n            pageWidthAnim={pageWidth}\n            pageHeightAnim={pageHeight}\n            pageAnim={pageAnim}\n          />\n        ) : (\n          renderPage?.({\n            index,\n            isActive,\n            focusAnim,\n            pageWidthAnim: pageWidth,\n            pageHeightAnim: pageHeight,\n            pageAnim,\n          })\n        )}\n      </Animated.View>\n    );\n  }\n);\n\nexport default React.memo(withWrappedProvider(React.forwardRef(InfinitePager)));\n\nfunction withWrappedProvider<P extends object, R extends object>(\n  Inner: React.ComponentType<P>\n) {\n  return React.forwardRef((props: P, ref: React.ForwardedRef<R>) => {\n    return (\n      <InfinitePagerProvider>\n        <Inner {...props} ref={ref} />\n      </InfinitePagerProvider>\n    );\n  });\n}\n\nconst styles = StyleSheet.create({\n  pageWrapper: {\n    left: 0,\n    right: 0,\n    top: 0,\n    bottom: 0,\n    position: \"absolute\",\n  },\n  activePage: {\n    position: \"relative\",\n  },\n});\n\nconst InfinitePagerContext = React.createContext({\n  activePagers: makeMutable([] as string[]) as SharedValue<string[]>,\n  pagers: makeMutable([] as string[]) as SharedValue<string[]>,\n  nestingDepth: -1,\n});\n\nconst SimultaneousGestureContext = React.createContext(\n  [] as SimultaneousGesture[]\n);\n\nfunction SimultaneousGestureProvider({\n  simultaneousGestures = EMPTY_SIMULTANEOUS_GESTURES,\n  children,\n}: {\n  simultaneousGestures?: SimultaneousGesture[];\n  children: React.ReactNode;\n}) {\n  return (\n    <SimultaneousGestureContext.Provider value={simultaneousGestures}>\n      {children}\n    </SimultaneousGestureContext.Provider>\n  );\n}\n\nfunction InfinitePagerProvider({ children }: { children: React.ReactNode }) {\n  const { nestingDepth, activePagers, pagers } =\n    useContext(InfinitePagerContext);\n  const rootPagers = useSharedValue<string[]>([]);\n  const rootActivePagers = useSharedValue<string[]>([]);\n\n  const value = useMemo(() => {\n    const isRoot = nestingDepth === -1;\n\n    return {\n      nestingDepth: nestingDepth + 1,\n      activePagers: isRoot ? rootActivePagers : activePagers,\n      pagers: isRoot ? rootPagers : pagers,\n    };\n  }, [nestingDepth, activePagers, pagers, rootPagers, rootActivePagers]);\n\n  return (\n    <InfinitePagerContext.Provider value={value}>\n      {children}\n    </InfinitePagerContext.Provider>\n  );\n}\n"],"mappings":"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","ignoreList":[]}